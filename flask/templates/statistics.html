{% extends "base.html" %}

{% block title %}–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - Disco DB Analyzer{% endblock %}

{% block content %}
<h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</h2>

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>–¢—Ä–µ–∫–∏ –ø–æ –∂–∞–Ω—Ä–∞–º</h5>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–ñ–∞–Ω—Ä</th>
                            <th>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in stats.tracks_by_genre %}
                        <tr>
                            <td>{{ item.genre }}</td>
                            <td><span class="badge bg-primary">{{ item.count }}</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="col-md-6">
        <div class="card">
            <div class="card-header">
                <h5>–°–µ–∞–Ω—Å—ã –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏</h5>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–î–µ–Ω—å</th>
                            <th>–°–µ–∞–Ω—Å–æ–≤</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for item in stats.sessions_by_weekday %}
                        <tr>
                            <td>{{ item.weekday }}</td>
                            <td><span class="badge bg-success">{{ item.sessions }}</span></td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–µ–¥—É—â–∏—Ö</h5>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–í–µ–¥—É—â–∏–π</th>
                            <th>–°–µ–∞–Ω—Å–æ–≤</th>
                            <th>–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤</th>
                            <th>–°—Ä–µ–¥–Ω–∏–π BPM</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for host in stats.host_performance %}
                        <tr>
                            <td>{{ host.first_name }} {{ host.last_name }}</td>
                            <td>{{ host.sessions_hosted }}</td>
                            <td>{{ host.unique_tracks }}</td>
                            <td>{{ "%.1f"|format(host.avg_bpm|float) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <div class="card">
            <div class="card-header">
                <h5>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–ª–æ–≤</h5>
            </div>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>–ó–∞–ª</th>
                            <th>–í–º–µ—Å—Ç–∏–º–æ—Å—Ç—å</th>
                            <th>–°–µ–∞–Ω—Å–æ–≤</th>
                            <th>–î–Ω–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for hall in stats.hall_utilization %}
                        <tr>
                            <td>{{ hall.hall }}</td>
                            <td>{{ hall.capacity }}</td>
                            <td>{{ hall.total_sessions }}</td>
                            <td>{{ hall.days_used }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
{% endblock %}
