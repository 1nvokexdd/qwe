<!-- templates/disco/music_tracks.html -->
{% extends 'base.html' %}

{% block title %}–ú—É–∑—ã–∫–∞ - –î–∏—Å–∫–æ—Ç–µ–∫–∞{% endblock %}

{% block content %}
<h1>üéµ –ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è</h1>

<div class="search-form">
    <form method="get">
        <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; align-items: end;">
            <div class="form-group">
                <label for="id_genre">–§–∏–ª—å—Ç—Ä –ø–æ –∂–∞–Ω—Ä—É:</label>
                <select name="genre" id="id_genre">
                    <option value="">–í—Å–µ –∂–∞–Ω—Ä—ã</option>
                    {% for genre in genres %}
                    <option value="{{ genre.id }}" {% if request.GET.genre == genre.id|stringformat:"i" %}selected{% endif %}>
                        {{ genre.name }}
                    </option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <button type="submit" class="btn">üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                <a href="{% url 'repertoire:music_tracks' %}" class="btn">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</a>
            </div>
        </div>
    </form>
</div>

{% if tracks %}
    <table>
        <thead>
            <tr>
                <th>–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–∞</th>
                <th>–ñ–∞–Ω—Ä</th>
                <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th>
            </tr>
        </thead>
        <tbody>
            {% for track in tracks %}
            <tr>
                <td><strong>{{ track.artist }}</strong></td>
                <td>{{ track.title }}</td>
                <td>
                    <span style="background: #764ba2; color: white; padding: 0.2rem 0.5rem; border-radius: 15px; font-size: 0.8rem;">
                        {{ track.genre }}
                    </span>
                </td>
                <td>
                    {% if track.duration %}
                        {{ track.duration }}
                    {% else %}
                        -
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    <div style="text-align: center; padding: 2rem;">
        <h3>üòî –¢—Ä–µ–∫–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
    </div>
{% endif %}
{% endblock %}
