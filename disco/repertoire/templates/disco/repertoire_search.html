<!-- templates/disco/repertoire_search.html -->
{% extends 'base.html' %}

{% block title %}–ü–æ–∏—Å–∫ - –î–∏—Å–∫–æ—Ç–µ–∫–∞{% endblock %}

{% block content %}
<h1>üîç –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫</h1>

<div class="search-form">
    <form method="get">
        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
            <div class="form-group">
                <label for="id_genre">–ñ–∞–Ω—Ä:</label>
                {{ form.genre }}
            </div>
            
            <div class="form-group">
                <label for="id_date">–î–∞—Ç–∞:</label>
                {{ form.date }}
            </div>
            
            <div class="form-group">
                <label for="id_hall">–ó–∞–ª:</label>
                {{ form.hall }}
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 1rem;">
            <button type="submit" class="btn">üîç –ù–∞–π—Ç–∏</button>
            <a href="{% url 'repertoire:repertoire_search' %}" class="btn">üîÑ –°–±—Ä–æ—Å–∏—Ç—å</a>
        </div>
    </form>
</div>

{% if repertoire %}
    <h3>–ù–∞–π–¥–µ–Ω–æ –∑–∞–ø–∏—Å–µ–π: {{ repertoire.count }}</h3>
    
    <table>
        <thead>
            <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–î–µ–Ω—å</th>
                <th>–í—Ä–µ–º—è</th>
                <th>–ó–∞–ª</th>
                <th>–í–µ–¥—É—â–∏–π</th>
                <th>–¢—Ä–µ–∫</th>
                <th>–ñ–∞–Ω—Ä</th>
            </tr>
        </thead>
        <tbody>
            {% for item in repertoire %}
            <tr>
                <td>{{ item.date }}</td>
                <td>{{ item.day }}</td>
                <td>{{ item.start_time|time:"H:i" }} - {{ item.end_time|time:"H:i" }}</td>
                <td>{{ item.hall }}</td>
                <td>{{ item.host }}</td>
                <td>
                    <strong>{{ item.music_track.artist }}</strong><br>
                    {{ item.music_track.title }}
                </td>
                <td>{{ item.music_track.genre }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% else %}
    {% if request.GET %}
    <div style="text-align: center; padding: 2rem;">
        <h3>üòî –ü–æ –≤–∞—à–µ–º—É –∑–∞–ø—Ä–æ—Å—É –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
    </div>
    {% endif %}
{% endif %}
{% endblock %}
