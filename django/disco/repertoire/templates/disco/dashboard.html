<!-- templates/disco/dashboard.html -->
{% extends 'base.html' %}

{% block title %}–ì–ª–∞–≤–Ω–∞—è - –î–∏—Å–∫–æ—Ç–µ–∫–∞{% endblock %}

{% block content %}
<h1>üéâ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º—É –¥–∏—Å–∫–æ—Ç–µ–∫–∏!</h1>

<div class="stats">
    <div class="stat-card">
        <div class="stat-number">{{ today_repertoire.count }}</div>
        <div>–°–æ–±—ã—Ç–∏–π —Å–µ–≥–æ–¥–Ω—è</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ total_tracks }}</div>
        <div>–¢—Ä–µ–∫–æ–≤ –≤ –±–∞–∑–µ</div>
    </div>
    <div class="stat-card">
        <div class="stat-number">{{ upcoming_events.count }}</div>
        <div>–ë–ª–∏–∂–∞–π—à–∏—Ö —Å–æ–±—ã—Ç–∏–π</div>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
    <div>
        <h2>üéµ –°–µ–≥–æ–¥–Ω—è—à–Ω–∏–π —Ä–µ–ø–µ—Ä—Ç—É–∞—Ä</h2>
        {% if today_repertoire %}
            <table>
                <thead>
                    <tr>
                        <th>–í—Ä–µ–º—è</th>
                        <th>–ó–∞–ª</th>
                        <th>–¢—Ä–µ–∫</th>
                        <th>–í–µ–¥—É—â–∏–π</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in today_repertoire %}
                    <tr>
                        <td>{{ item.start_time|time:"H:i" }}</td>
                        <td>{{ item.hall }}</td>
                        <td>{{ item.music_track.title }}</td>
                        <td>{{ item.host }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>–ù–∞ —Å–µ–≥–æ–¥–Ω—è —Å–æ–±—ã—Ç–∏–π –Ω–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ</p>
        {% endif %}
    </div>

    <div>
        <h2>üìÖ –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è</h2>
        {% if upcoming_events %}
            <table>
                <thead>
                    <tr>
                        <th>–î–∞—Ç–∞</th>
                        <th>–î–µ–Ω—å</th>
                        <th>–ó–∞–ª</th>
                        <th>–¢—Ä–µ–∫</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in upcoming_events %}
                    <tr>
                        <td>{{ item.date }}</td>
                        <td>{{ item.day }}</td>
                        <td>{{ item.hall }}</td>
                        <td>{{ item.music_track.artist }} - {{ item.music_track.title }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p>–ù–µ—Ç –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏—Ö —Å–æ–±—ã—Ç–∏–π</p>
        {% endif %}
    </div>
</div>

<div style="margin-top: 2rem; text-align: center;">
    <a href="{% url 'repertoire:repertoire_add' %}" class="btn">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤ —Ä–µ–ø–µ—Ä—Ç—É–∞—Ä</a>
    <a href="{% url 'repertoire:repertoire_list' %}" class="btn">üìã –í–µ—Å—å —Ä–µ–ø–µ—Ä—Ç—É–∞—Ä</a>
</div>
{% endblock %}
